(this["webpackJsonpconsensusless-blockchain-wallet"]=this["webpackJsonpconsensusless-blockchain-wallet"]||[]).push([[0],{282:function(e,t,n){e.exports=n(552)},287:function(e,t,n){},293:function(e,t){},295:function(e,t){},326:function(e,t){},327:function(e,t){},413:function(e,t){},431:function(e,t,n){},552:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(51),l=n.n(c),u=(n(287),n(17)),o=n.n(u),s=n(23),i=n(35);var p=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),r=Object(i.a)(n,2),c=r[0],l=r[1];return[c,function(t){try{var n=t instanceof Function?t(c):t;l(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]},m=n(78),f=n.n(m),v=n(108),b=n.n(v);function h(){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.generateKey(2048);case 2:return t=e.sent,e.next=5,new b.a.Key("jwk",t.publicKey).export("pem");case 5:return n=e.sent,e.next=8,new b.a.Key("jwk",t.privateKey).export("pem");case 8:return a=e.sent,e.abrupt("return",{publicKey:t.publicKey,transactions:[],privateKey:t.privateKey,pem_pub_key:n,pem_pri_key:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return e.pem_pub_key===t.rcv}var w=n(64),E=n.n(w);function g(e,t){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t+"/accounts/transactions",e.next=3,E.a.post(a,{account_key:n});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.log("No valid transaction provided."),e.abrupt("return");case 3:return a=t+"/transactions",e.next=6,E.a.post(a,{transaction:n});case 6:return r=e.sent,console.log(r),e.abrupt("return",r.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,n.pem_pub_key);case 2:return(a=e.sent)&&(n.transactions=a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),a=0,r=e.length;a<r;a++)n[a]=e.charCodeAt(a);return t}var C=function(e,t){return K.apply(this,arguments)};function K(){return(K=Object(s.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.sign(N(t),n.privateKey,"SHA-256",{name:"RSASSA-PKCS1-v1_5",saltLength:64});case 2:return a=e.sent,e.next=5,f.a.verify(N(t),a,n.publicKey,"SHA-256",{name:"RSA-PSS",saltLength:64});case 5:return e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return console.log(t),t.amt-e.filter((function(e){return!!e.frm[t.sig]})).map((function(e){return e.amt})).reduce((function(e,t){return e+t}),0)}function A(e,t){var n=Object.values(e.transactions),a=t,r={};for(var c in n){var l=n[c],u=_(n,l);if(console.log(u),u>0){var o=Math.min(a,u);r[l.sig]=o,a-=o}if(a<=0)return r;console.log(r,a)}return null}function R(e,t){var n=[],a=function(e){for(var t=0,n=Object.entries(e.transactions);t<n.length;t++){var a=n[t];if(!a[1].isValid)return a[0]}}(e);return console.log(a,t),a&&n.push(a),t&&n.push(t.sig),n}function B(e){return H.apply(this,arguments)}function H(){return(H=Object(s.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t+"/transactions/open/one",e.next=3,E.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.sender,n=e.receiver,a=e.amount,r=e.former,c=e.refered;return"frm:"+Object.keys(r).map((function(e){return e+"-"+r[e]})).reduce((function(e,t){return""==e?t:e+"xmru382mu8m3p9421"+t}),"")+"3241klfhauesnd:"+t+"3241klfhauercv:"+n+"3241klfhaueamt:"+a+"3241klfhaueref:"+c.reduce((function(e,t){return""==e?t:e+"xmru382mu8m3p9421"+t}),"")+"3241klfhaue"}function T(e,t){return e+"sig:"+(n=t,Array.prototype.map.call(new Uint8Array(n),(function(e){return("00"+e.toString(16)).slice(-2)})).join(""));var n}var W=function(e,t,n,a){return F.apply(this,arguments)};function F(){return(F=Object(s.a)(o.a.mark((function e(t,n,a,r){var c,l,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=A(a,t)){e.next=4;break}return console.log("Not enough balance apparently!"),e.abrupt("return",null);case 4:return e.t0=R,e.t1=a,e.next=8,B(r);case 8:return e.t2=e.sent,l=(0,e.t0)(e.t1,e.t2),console.log(l),u=J({amount:t,receiver:n,former:c,sender:a.pem_pub_key,refered:l}),e.next=14,C(u,a);case 14:return s=e.sent,u=T(u,s),e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(431);var I=n(554),P=n(563),U=n(565),L=n(564);function V(e){var t=e.wallet,n=e.setTransaction,c=e.setWallet,l=e.endpoint,u=Object(a.useState)(!1),p=Object(i.a)(u,2),m=(p[0],p[1]),f=Object(a.useState)(""),v=Object(i.a)(f,2),b=v[0],h=v[1],d=Object(a.useState)(""),w=Object(i.a)(d,2),E=w[0],g=w[1],k=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.t0=c,e.next=4,x(l,t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"clbc-wallet-container"},r.a.createElement("div",null,r.a.createElement("div",{className:"clbc-balance-wrapper"},r.a.createElement("h3",null,"Balance"),r.a.createElement("p",null,function(e){return Object.values(e.transactions).filter((function(t){return(t.val||!y(e,t))&&!function(e){return e.snd==e.rcv}(t)})).map((function(t){return y(e,t)?t.amt:-t.amt})).reduce((function(e,t){return e+t}),0)}(t))),r.a.createElement("div",{className:"clbc-public-key-wrapper"},r.a.createElement("h3",null,"Public Key"),r.a.createElement("p",null,t.pem_pub_key.split("\n").map((function(e){return r.a.createElement(r.a.Fragment,null,e,r.a.createElement("br",null))}))))),r.a.createElement("div",null,r.a.createElement("div",{className:"clbc-create-transaction-wrapper"},r.a.createElement("h3",null,"Send"),r.a.createElement(U.a,null,r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"Amount"),r.a.createElement("input",{placeholder:"Amount",value:b,onChange:function(e){return h(e.target.value)}})),r.a.createElement(U.a.Field,null,r.a.createElement("label",null,"Receiver Key"),r.a.createElement(L.a,{placeholder:"Receiver Key",value:E,onChange:function(e){g(e.target.value)}})),r.a.createElement(I.a,{type:"button",primary:!0,onClick:Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.t1=l,e.next=4,W(b,E,t,l);case 4:return e.t2=e.sent,e.next=7,(0,e.t0)(e.t1,e.t2);case 7:k(),g(""),h("");case 10:case"end":return e.stop()}}),e)})))},"Submit"))),r.a.createElement("div",{className:"clbc-create-transaction-history-wrapper"},r.a.createElement("h3",null,"History"),r.a.createElement(I.a,{primary:!0,onClick:k},"Reload"),r.a.createElement("ul",null,Object.values(t.transactions).map((function(e){return r.a.createElement("li",{onClick:function(){return n(e)}},e.sig.slice(0,30)+"...")})))))))}var M=n(53),$=n(566);function q(e){var t=e.transaction,n=e.setTransaction;return r.a.createElement("div",null,r.a.createElement(I.a,{icon:!0,onClick:function(){return n()}},r.a.createElement(M.a,{name:"arrow left"})),r.a.createElement($.a,{celled:!0},r.a.createElement($.a.Header,null,r.a.createElement($.a.Row,null,r.a.createElement($.a.HeaderCell,null,"Key"),r.a.createElement($.a.HeaderCell,null,"Value"))),r.a.createElement($.a.Body,null,Object.keys(t).map((function(e){return r.a.createElement($.a.Row,null,r.a.createElement($.a.Cell,null,e),r.a.createElement($.a.Cell,null,"sig"===e&&r.a.createElement("div",{className:"clbc-transaction-table-value"},t[e]),"ref"===e&&r.a.createElement("div",{className:"clbc-transaction-table-value"},JSON.stringify(t[e])),"frm"===e&&r.a.createElement("div",{className:"clbc-transaction-table-value"},JSON.stringify(t[e])),"amt"===e&&t[e],"val"===e&&""+t[e],"snd"===e&&r.a.createElement("div",{className:"clbc-transaction-table-value"},t[e]),"rcv"===e&&r.a.createElement("div",{className:"clbc-transaction-table-value"},t[e])))})))))}var z=function(){var e=p("wallet"),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(),u=Object(i.a)(l,2),m=u[0],f=u[1],v=Object(a.useState)("http://localhost:5000"),b=Object(i.a)(v,2),d=b[0],y=b[1];return r.a.createElement("div",{className:"clbc-container"},r.a.createElement("h1",null,"Consensusless Blockchain"),n?m?r.a.createElement(q,{transaction:m,setTransaction:f}):r.a.createElement(V,{wallet:n,setTransaction:f,endpoint:d,setWallet:c}):r.a.createElement("div",{className:"clbc-no-wallet-container"},r.a.createElement("h2",null,">No wallet found"),r.a.createElement("p",null,"To interact with the blockchain you need to create a wallet."),r.a.createElement(I.a,{primary:!0,onClick:Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,h();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))},"Create New Wallet")),r.a.createElement("div",null,r.a.createElement("h2",null,"Use Node"),r.a.createElement(P.a,{value:d,onChange:function(e){return y(e.target.value)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[282,1,2]]]);
//# sourceMappingURL=main.2b24fd6d.chunk.js.map